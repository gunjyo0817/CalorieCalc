import os

# 設定映射關係
class_id_to_label = {
    0: 'cucumber', 
    1: 'chicken',
    2: 'shrimp',
    3: 'brocolli',
    4: 'bean',
    5: 'salmon',
    6: 'pork',
    7: 'rice',
    8: 'pumpkin',
    9: 'egg_dish',
    10: 'nut',
    11: 'carrot',
    12: 'king_oyster',
    13: 'vegetable',
    14: 'winter_melon',
    15: 'mango',
    16: 'avocado',
    17: 'baby_corn',
    18: 'beef',
    19: 'sprout',
    20: 'eggplant',
    21: 'mushroom',
    22: 'potato',
    23: 'brocoli',
    24: 'corn',
    25: 'toast',
    26: 'onion',
    27: 'cabbage',
    28: 'egg',
    29: 'green_pepper',
    30: 'green_bean',
    31: 'tofu',
    32: 'fish',
    33: 'tomato',
    34: 'lemon',
    35: 'yam'
}

filename_to_calorie = {
    '水煮牛肉': 550,
    '來自挪威的烤薄鹽鯖魚': 530,
    '不用客氣滿滿肉片': 520,
    '靈感來自古宇利島的蝦蝦飯': 430,
    '清蒸義式雞腿': 580,
    '義式水煮雞胸肉': 430,
    '秘製岳母牛腱肉': 470,
    '香滷雞腿': 601.7,
    '水煮嫩雞胸': 545.6,
    '穀飼牛漢堡排': 591,
    '泡菜豬里肌': 468.9,
    '鹽烤鯖魚': 542.3,
    '韓式菇菇雞': 526.3,
    '麻香口水雞': 578.5,
    '日式壽喜牛便當': 686.8,
    '日式蔥鹽雞': 510.7,
    '泰式打拋雞': 505,
    '蒜泥豬里肌': 470.1,
    '清滷牛腱': 526.5,
    '照燒雞腿排': 632.3,
    '鷹嘴豆咖哩': 623.9,
    '菜飯餐盒': 350,
    '00': 492,
    '01': 443,
    '02': 478,
    '03': 341,
    '04': 405,
    '05': 429,
    '06': 386,
    '07': 415,
    '08': 252.4,
    '09': 483,
    '711繽紛鮮蔬烤雞便當_1': 371,
    '711繽紛鮮蔬烤雞便當_2': 371,
    '711繽紛鮮蔬烤雞便當_3': 353,
    '義式雞腿排餐盒': 572.5,
    '鹽烤鮭魚菲力餐盒': 587.3,
    '舒肥雞胸肉餐盒': 623.4,
    '日式煎豆腐餐盒': 553.6,
    '舒肥牛排餐盒': 515.3,
    '香檸松阪豬餐盒': 516.1,
    '蒜烤霜降豬餐盒': 581.6,
    '全家烤多蛋白餐盒_1': 463,
    '全家烤多蛋白餐盒_2': 463,
    '全家健身G肉餐盒': 461,
    '全家美式雞丁餐盒': 466,
    '初夏牛腱沙律1': 552.1,
    '嫩滑雞胸2': 449.8,
    '叉雞飯3': 485.5,
    '煎牛扒蘆筍4': 455.7,
    '鯛魚13': 685,
    '鯛魚3': 685,
    '雞腿26': 694,
    '雞腿24': 694,
    '雞腿17': 694,
    '雞腿4': 694,
    '雞排23': 751,
    '雞排20': 751,
    '雞排18': 751,
    '雞排14': 751,
    '雞胸雙拼38': 628,
    '蔥雞胸30': 696,
    '蔥雞胸27': 696,
    '蔥雞胸14': 696,
    '蔥雞胸13': 696,
    '蒲燒鯛魚12': 685,
    '嫩雞胸25': 646,
    '嫩雞胸2': 646,
    '義式杏鮑菇39': 524,
    '飯1': 525,
    '舒肥原味雞胸40': 579,
    '舒肥原味雞胸31': 579,
    '舒肥原味雞33': 579,
    '排骨6': 670,
    '芥末椒鹽大鮭魚41': 728,
    '低脂雙拼32': 628,
    '西班牙煙燻雞腿35': 739,
    '西班牙煙燻雞43': 739,
    '西班牙煙燻去骨雞44': 739,
    '西班牙煙燻34': 739,
    '西班牙去古蹟37': 739,
    '地瓜減脂36': 166,
    '白煮魚15': 577,
    '白煮魚5': 577,
    '白身魚16': 577,
    '打拋豬22': 780,
    '打拋豬21': 780,
    '打拋豬11': 780,
    '打拋豬10': 780,
    '牛腱9': 685,
    '牛腱8': 685,
    '牛腱7': 685,
    '牛腱6': 685,
    '711松阪豬花椰菜減醣飯': 276,
    '牛肉餐02': 460,
    '里肌豬餐01': 459,
    '里肌豬餐02': 459,
    '里肌豬餐03': 459,
    '里肌豬餐05': 459,
    '雞胸餐01': 400.5,
    '雞腿餐02': 493.7,
    '雞腿餐04': 493.7,
    '味噌松阪豬': 654,
    '泰式烤雞腿': 743,
    '02算來算去涮涮牛': 582,
    '03如魚得水水煮魚': 529,
    '05力爭上游鮮鮭魚': 588,
    '07浩克小肌雞胸': 556,
    '08清新脫俗素餐盒': 384,
    "醬煮牛肉425": 425,
    "戰斧鮭魚614": 614,
    "蒜泥豬肉477": 477,
    "嫩雞胸548": 548,
    "嫩煎雞腿排597": 597,
    "舒肥雞胸413": 413,
    "舒肥雞胸413_3": 413,
    "舒肥雞胸413_2": 413,
    "手撕雞573": 573,
    "巴沙魚433": 433,
    "711香烤雞胸鮮蔬餐": 355,
    "牛肉餐01": 460,
    "牛肉餐03": 460,
    "里肌豬餐04": 459,
    "雞胸餐02": 400.5,
    "雞胸餐03": 400.5,
    "雞腿餐01": 493.7,
    "雞腿餐03": 493.7,
    "01舒肥大肌雞胸肉": 534,
    "04台灣豬就是讚": 652

}

# 設定資料夾路徑
input_folder = "origin_labeled_txts"
output_folder = "created_with_high_txts"

# 確保輸出資料夾存在
os.makedirs(output_folder, exist_ok=True)

# 目標食物類別
target_labels = {'beef', 'pork', 'chicken', 'fish'}
target_class_id = 36

# 處理每一個文件
for filename in os.listdir(input_folder):
    if filename.endswith('.txt'):
        file_stem = filename[:-4]  # 去掉文件名的 ".txt"
        calorie = filename_to_calorie.get(file_stem, 0)
        input_path = os.path.join(input_folder, filename)
        output_path = os.path.join(output_folder, filename)
        
        # 如果 calorie 小於 500，產生空文件
        if calorie < 500:
            with open(output_path, 'w') as f:
                pass
            continue

        # calorie >= 500，過濾並處理文件
        with open(input_path, 'r') as infile, open(output_path, 'w') as outfile:
            for line in infile:
                parts = line.strip().split()
                class_id = int(parts[0])
                label = class_id_to_label.get(class_id, None)

                # 如果標籤在目標類別中，替換 class id 為目標 class id，否則忽略
                if label in target_labels:
                    parts[0] = str(target_class_id)
                    outfile.write(' '.join(parts) + '\n')
